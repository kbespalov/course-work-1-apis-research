
# REST API
REST (Representational State Transfer) — это способ создания API с помощью  HTTP протокола. 

Для того чтобы разобраться в REST API необходимо для начала познакомиться с протоколом HTTP, поскольку он неразрывно с ним связан и основывается на нем. 

# Базовые принципы HTTP
HTTP - это сетевой протокол, который позволяет передавать данные в текстовом виде (еще говорят, в виде гипертекста) между клиентом и удаленным сервером и расшировывается как HyperText Transfer Protocol. 

Как протокол, он задает собой список правил (формат), которые на текущий момент являются основой для обмена данными в сети Интернет. HTTP умеет передавать все возможные форматы файлов — например, видео, аудио, текст. Но при этом сами данные кодируются в виде текста по умолчанию.



### Описание HTTP-протокола: 

В протоколе участвуют две составляющие: 

- Клиент, который отправляет запрос на сервер (HTTP Request)
- Сервер, который на запрос клиента возвращает некий ответ (HTTP Response)

Как утверждалось ранее, протокол является текстовым, однако  структура запроса на сервер, как и  структура ответа от сервера имеет строгий формат и должен начинаться со служебного заголовка. Причем он отличается в случае запроса и в случае ответа от сервера.

### Формат запроса на сервер

Клиент после успешного подключения на сервер должен отправить текстовый запрос в следующем формате:

- `Path:` /about
- `Method:` {GET|POST|PUT|DELETE}
- `Headers:` {Content-type, Content-Size, Host}
- `Body:` {TEXT DATA}

В поле Path клиент указывает какой именной ресурс на сервере он хочет обратится. В поле Method клиент указывает серверу о том, какое действие над ресурсом он хочет выполнить. Далее идет серия заголовков, позволяющих  добавить некоторые метаданные к запросу, например, предпочитаемый формат ответа или язык (Accept Language). И в конце концов, если клиент выполняет загрузку либо модификацию данных на сервере, то он их указывает в текстовом виде в секции Body.

<img src="https://miro.medium.com/max/1400/1*i2tUjWy44-dYT9qsaWbvig.png" width="500" height="400" />

Например, HTTP запрос на скачивание логотипа сайта СГУ мог бы выглядеть следующим:

```yaml
GET /sites/all/themes/ssu_theme/logo.png HTTP/1.1
Host: www.sgu.ru
User-Agent: curl/7.64.1
Accept: */*
```


Перечень возможных значений поля Method ограничен следующими четырьмя:


- `GET` - получение данных или списка объектов с сервера
- `DELETE` - удаление данных
- `POST` - добавление или замена данных
- `PUT` - регулярное обновление данных


Структура HTTP ответа практически идентична, за исключением того, что  добавляется служебное поле код статуса ответа и его описания.  Сервер может закончить обработку запроса клиента с ошибкой и это поле как раз используется для того, чтобы сообщить об этом клиенту. 


Например, так выглядит тело ответа сервера СГУ на запрос о скачивании логотипа сайта:

```sh
curl -D - https://www.sgu.ru/sites/all/themes/ssu_theme/logo.png | less
```

```yaml
HTTP/1.1 200 OK
Server: nginx
Date: Sat, 03 Dec 2022 16:29:10 GMT
Content-Type: image/png
Content-Length: 27595
Last-Modified: Tue, 05 Feb 2013 14:19:38 GMT
Cache-Control: max-age=3600
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Cache-Control: private
Accept-Ranges: bytes

{Логотип сайта в текстовом виде}
```


## Коды статуса:

<img src="https://www.infidigit.com/wp-content/uploads/2019/12/20191227_012601_0000.png" width=30% height=30% />

### 

HTTP  независимый от языка программирования протокол, предназначенный для обмена документами между приложениями. Протокол HTTP используется широким спектором приложений, наиболее известными из которых являются веб-браузеры. Веб-браузер использует протокол HTTP для связи с веб-сервером, на котором размещен сайт. Когда вы набираете URL-адрес (например, 
http://apihandyman.io/about) в адресной строке браузера, он отправляет 
HTTP-запрос GET /about на сервер, где находится apihandyman.io, так 
же как когда потребитель API отправляет запрос на сервер REST API. Ответ, отправленный сервером, содержит код состояния 200 OK, за которым следует HTML-страница, соответствующая URL-адресу.
Браузеры используют этот протокол для извлечения любого типа ресурса (документа): HTML-страниц, CSS-файлов, файлов JavaScript, изображений и любых других документов, которые необходимы веб-сайту. 
Еще один пример http протокола, например, при загрузке фотографии на сайт социальной сети, браузер использует протокол HTTP, но на этот раз для отправки документа на сервер. В этом случае браузер отправляет запрос POST /photos с телом, содержащим файл 
изображения. Поэтому протокол HTTP также может использоваться для 
отправки содержимого ресурса.
HTTP-запросы и ответы всегда выглядят одинаково независимо от 
того, что запрашивается и каков результат обработки запроса.
Каким бы ни было его назначение, базовый HTTP-запрос содержит 
метод HTTP и путь к ресурсу на сервере. Метод HTTP указывает, что нужно сделать 
с ресурсом, который идентифицирует путь. Например, метод GET, используемый для получения ресурса, и POST, используемый 
для его отправки.
За этой первой частью запроса может следовать тело с содержимым 
ресурса, которое необходимо отправить на сервер, например для создания, обновления или замены ресурса.
Это содержимое может быть любого типа: документ в формате JSON, текстовый файл или фотография.
А ответ HTTP, возвращаемый сервером, всегда 
содержит код состояния и поясняющую фразу.
Это указывает на то, как 
прошла обработка запроса – была ли она успешной или нет.  За этой первой частью ответа может следовать тело с содержимым ресурса, которым манипулировал запрос.
Как и тело запроса, тип этого содержимого может быть любым.
Протокол HTTP кажется довольно простым. Но настолько ли просты REST API которые используют его запросы?


- https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview#http_flow


<img src="img.png" width="700" height="350" />
